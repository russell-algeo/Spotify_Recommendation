# Spotify_Recommendation

This repository contains a Spotify exploration and track recommendation tool to speed up the music discovery process for Spotify users. It also can be used to "boost" as user's playlists or identify tracks from their saved songs that would mesh will with their pre-existing playlists they are trying to bolster. 

# Data
Unfortunately, I cannot post my Spotify API credentials publicly, and hence you will need to obtain personal credentials and paste them into `config.py` before any API queries can be executed. These credentials can be requested on [Spotify's developer site](https://developer.spotify.com/documentation/general/guides/authorization-guide/).
Additionally, Spotify does not let you access your listening history beyond the 50 most recently streamed tracks. Within the [privacy page](https://www.spotify.com/ca-en/account/privacy/) of your Spotify account page, you can request to download your Spotify data -- the past 12 months of streaming history is included in this dump and is required to extract streaming history data via `extract_streaming_history_data.ipynb` and for use in the identification of a user's most popular tracks, binge worthy tracks, and dependable tracks in `spotify_exploration_and_reccomendation.ipynb`.

Data to be collected:
- `saved_tracks.csv`: data on the user's saved tracks, containing Spotify API audio features as well as calculated rich audio features for all tracks.
- `processed_streams.csv`: data on the user's past year of streaming history,  containing Spotify API audio features as well as calculated rich audio features for all tracks.
- `/playlists` csv files: data on the user's playlists, containing Spotify API audio features as well as calculated rich audio features for all tracks.
- `tracks.csv`: data store to cache information retrieved from Spotify API queries to prevent redundant queries and improve running time of data extraction.

In order to collect the necessary data, use:
- `extract_saved_tracks_data.ipynb`: scrapes and calculates saved tracks data (track list, Spotify API audio features, calculated rich audio features) for a user by connecting to Spotify API. Exports data as `saved_tracks.csv` to `/output`.
- `extract_playlist_data.ipynb`: extracts playlist data (track list, Spotify API audio features, calculated rich audio features) for a user's playlist. Exports playlist data to `/output/playlists` as .csv files.
- `extract_streaming_history_data.ipynb`: scrapes and calculates streaming history data (track list, Spotify API audio features, calculated rich audio features) from .json files provided by Spotify data dump. Exports data as `processed_streams.csv` to `/output`. Requires Spotify data from data dump explained earlier.

# Exploration
- `spotify_exploration_and_recommendation.ipynb`: users are able to explore trends in their listening history and identify / create Spotify playlists containing their top 100 most streamed tracks of the year, top 100 most binge worthy tracks as represented as tracks that had the longest period of frequent streaming in successive days, and top 100 most dependable tracks as represented by tracks with the largest spread of listening times throughout the year. 

In `spotify_exploration_and_recommendation.ipynb`, we specifically explore the trends in my listening history. My Spotify account can be found [here](https://open.spotify.com/user/russyalgeo.?si=0c9d87d601ad4eea)
- [Your Most Popular Tracks](https://open.spotify.com/playlist/2TsNry1w3lA49R4KdvXrRP?si=a3229cad7fc443ce)
- [Your Binge Worthy Tracks](https://open.spotify.com/playlist/42MJ2up27EqG52qlumLU6t?si=4619f66e3b5f4a86)
- [Your Dependable Tracks](https://open.spotify.com/playlist/3AZYqdzvybDwL1IvwiYV6o?si=cc1d4a79349c486f)

# Recommender
- `spotify_exploration_and_recommendation.ipynb`: users are able to request recommendations for specific tracks, averages of several tracks, and arithmetic "differences" of two tracks.
- `spotify_playlist_boost.ipynb`: allows user's to discover songs from their saved tracks that would fit well into their playlists in an effort to bolster their playlists with tracks enjoyed in the past that have been neglected or forgotten. This is achieved in two ways:
  - Via clustering the playlist and using a K Neighbors model to recommend tracks based on cosine similarity to the mean vector of each cluster
  - Via training a Support Vector Classifier, Logistic Regression Classifier, Random Forest Classifier, and K Neighbors Classifier and utilizing the imperfect classification accuracy to our advantage to identify songs that fit into the tone or sound of the playlist more so than the sound of the user's saved tracks.

In `spotify_playlist_boost.ipynb`, we specifically explore recommendations to bolster one of my playlists entitled "Dune Juuz" which can be found [here](https://open.spotify.com/playlist/1ToqeObjA9M7eJxW75s3kp?si=b31987da35504a4e)
Recommendations generated by `spotify_playlist_boost.ipynb` for "Dune Juuz" can be found broken down by the set of features used for recommendation:
- Via clustering and cosine similarity:
  - [Recommendations for Dune Juuz: Spotify Audio Features and Genres](https://open.spotify.com/playlist/3ZUavcBnw4EJlSl25NwZIh?si=da91bdab2a444bdc)
  - [Recommendations for Dune Juuz: Calculated Audio Features and Genres](https://open.spotify.com/playlist/0ASI85h22qapGUIMEyBAng?si=0a2587d5ed084cad)
  - [Recommendations for Dune Juuz: All Features](https://open.spotify.com/playlist/2PNWWsZe0jxDxTAzN1up1m?si=49050b2413d74263)
- Via errors in classification models:
  - [What Belongs in Dune Juuz: Spotify Audio Features and Genres](https://open.spotify.com/playlist/7gIEN490goEzgoGXNttdCc?si=66e37b3375194ea0)
  - [What Belongs in Dune Juuz: Calculated Audio Features and Genres](https://open.spotify.com/playlist/4Q8ro4QhrCHXmBrZ9MKi3x?si=c8664f7020b045dc)
  - [What Belongs in Dune Juuz: All Features](https://open.spotify.com/playlist/5WPkZKMt0vSKMhHV9eyucd?si=54f3fd505ead4f95)

In `spotify_exploration_and_recommendation.ipynb`, example recommendations for tracks such as "SFX / ORY" by Sebo K or "It Swims Here" by Tom VR were made into playlists that can be found below:
- [Recommendations for SFX / ORY](https://open.spotify.com/playlist/4ukli7noVUxo2kDE9mfv4W?si=ca0aa37f22284b54)
- [Recommendations for It Swims Here](https://open.spotify.com/playlist/0qlqvoGqAQyXKxwBlR39Aa?si=b2fa8b57c0b84b82)

# Supplemental Code
- `utils.py`: contains various utility functions used throughout the data extraction process.
- `config.py`: contains space to enter personal Spotify API credentials to be able to execute Spotify API queries used in data collection.

Due to file upload size limits, I cannot directly upload the .csv files resulting form data collection of my saved tracks, listening history, and playlists referenced above. They can be found in a [google drive folder](https://drive.google.com/drive/folders/1QIBsoJ4wbtgYiuP2Yrzh1qSdOkCLcnNG?usp=sharing) where they can be downloaded.
